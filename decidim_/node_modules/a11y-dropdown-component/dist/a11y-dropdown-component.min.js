!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Dropdowns=t()}}(function(){return function(){return function t(e,i,n){function r(s,u){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return r(i||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}}()({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o,s,u,a,d,h,c,l=(o=27,s=35,u=36,a=38,d=40,h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.trigger=e.trigger,this.dropdown=document.getElementById(e.dropdown),this.items=this.dropdown.querySelectorAll("[data-item]"),this.links=this.dropdown.querySelectorAll("[data-focus]");var i=n(this.links,1);this.firstLink=i[0],this.lastLink=this.links[this.links.length-1],this.state=[],this.currentFocusedIndex=0,this.hover=e.hover,this.isOpen=e.isOpen,this.autoClose=e.autoClose,this.open=this.open.bind(this),this.toggle=this.toggle.bind(this),this.onClick=this.onClick.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeydown=this.onKeydown.bind(this),this.isOpen&&this.open()}return r(t,[{key:"onClick",value:function(t){this.autoClose||t.target.closest("#"+this.trigger.id+", #"+this.dropdown.id)||this.close(),this.autoClose&&!t.target.closest("#"+this.trigger.id)&&this.close()}},{key:"onFocus",value:function(t){var e=this;this.state.forEach(function(i,n){t.target===i.link&&(e.currentFocusedIndex=n)})}},{key:"setFocus",value:function(t){switch(t.preventDefault(),t.target===this.trigger&&(this.currentFocusedIndex=0),t.which){case a:this.state[this.currentFocusedIndex].prevLink.focus();break;case u:this.firstLink.focus();break;case s:this.lastLink.focus();break;case d:t.target!==this.trigger?this.state[this.currentFocusedIndex].nextLink.focus():this.firstLink.focus()}}},{key:"onKeydown",value:function(t){switch(t.which){case o:this.close(t);break;case a:case d:case u:case s:this.setFocus(t)}}},{key:"addAttributes",value:function(){this.trigger.setAttribute("aria-haspopup",!0),this.trigger.setAttribute("aria-controls",this.trigger.dataset.target),this.dropdown.setAttribute("role","menu"),this.dropdown.setAttribute("aria-labelledby",this.trigger.id),this.dropdown.setAttribute("tabindex",-1),this.dropdown.setAttribute("aria-hidden",!this.isOpen),this.state.forEach(function(t){t.item&&t.item.setAttribute("role","none"),t.link.setAttribute("role","menuitem"),t.link.setAttribute("tabindex",-1)})}},{key:"removeAttributes",value:function(){this.trigger.removeAttribute("aria-haspopup"),this.trigger.removeAttribute("aria-controls"),this.trigger.removeAttribute("aria-expanded"),this.dropdown.removeAttribute("role"),this.dropdown.removeAttribute("aria-labelledby"),this.dropdown.removeAttribute("tabindex"),this.dropdown.removeAttribute("aria-hidden"),this.state.forEach(function(t){t.item&&t.item.removeAttribute("role"),t.link.removeAttribute("role"),t.link.removeAttribute("tabindex")})}},{key:"addEventListeners",value:function(){var t=this;document.addEventListener("click",this.onClick),this.hover&&document.addEventListener("mouseover",this.onClick),this.trigger.addEventListener("keydown",this.onKeydown),this.dropdown.addEventListener("keydown",this.onKeydown),this.links.forEach(function(e){e.addEventListener("focus",t.onFocus)})}},{key:"removeEventListeners",value:function(){var t=this;document.removeEventListener("click",this.onClick),this.hover&&document.removeEventListener("mouseover",this.onClick),this.trigger.removeEventListener("keydown",this.onKeydown),this.dropdown.removeEventListener("keydown",this.onKeydown),this.links.forEach(function(e){e.removeEventListener("focus",t.onFocus)})}},{key:"open",value:function(){this.isOpen=!0,this.trigger.setAttribute("aria-expanded",!0),this.dropdown.setAttribute("aria-hidden",!1),this.addEventListeners()}},{key:"close",value:function(t){this.isOpen=!1,this.trigger.setAttribute("aria-expanded",!1),this.dropdown.setAttribute("aria-hidden",!0),this.removeEventListeners(),t&&this.trigger.focus()}},{key:"toggle",value:function(t){t.preventDefault(),this.isOpen=!this.isOpen,this.isOpen?this.open():this.close()}},{key:"destroy",value:function(){this.removeAttributes(),this.removeEventListeners(),this.trigger.removeEventListener("click",this.toggle),this.hover&&this.trigger.removeEventListener("mouseover",this.open)}},{key:"render",value:function(){var t=this;this.links.forEach(function(e,i){t.state.push({item:t.items[i],link:e,prevLink:t.links[i-1]||t.lastLink,nextLink:t.links[i+1]||t.firstLink})}),this.addAttributes(),this.trigger.addEventListener("click",this.toggle),this.hover&&this.trigger.addEventListener("mouseover",this.open)}}]),t}(),c=[],{render:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.isOpen,n=void 0!==i&&i,r=e.hover,o=void 0!==r&&r,s=e.autoClose,u=void 0!==s&&s,a=document.getElementById(t),d=a.dataset.target,l=new h({trigger:a,dropdown:d,isOpen:n,hover:o,autoClose:u});l.render(),c.push(l)},destroy:function(t){c.forEach(function(e,i){t===e.trigger.id&&(e.destroy(),c.splice(i,1))})},init:function(){var t={};document.querySelectorAll('[data-component="dropdown"]').forEach(function(e){t.trigger=e,t.dropdown=e.dataset.target,t.hover="true"===e.dataset.hover,t.isOpen="true"===e.dataset.open,t.autoClose="true"===e.dataset.autoClose,new h(t).render()})}});i.default=l},{}]},{},[1])(1)});