<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario alcorques</title>
</head>
<body>
    <h1>Inventario alcorques</h1>

    <form method="get">
        <input type="text" name="q" placeholder="Bucar (dirección, barrio)" value="{{ q }}">
        <select name="estado">
            <option value="">-- Estado (todos) --</option>
            <option value="BUENO" {% if estado == "BUENO" %}selected{% endif %}>Bueno</option>
            <option value="REGULAR" {% if estado == "REGULAR" %}selected{% endif %}>Regular</option>
            <option value="MALO" {% if estado == "MALO" %}selected{% endif %}>Malo</option>
            <option value="NECESITA_INTERVENCION" {% if estado == "NECESITA_INTERVENCION" %}selected{% endif %}>Necesita intervención</option>
        </select>
        <button type="submit">Filtrar</button>
        <a href="/inventario/alcorques/">Reset</a>
    </form>

    <hr>

    <table border="1" cellpadding="6">
        <thead>
            <tr>
                <th>ID</th>
                <th>Barrio</th>
                <th>Estado</th>
                <th>Dirección</th>
                <th>Latitud</th>
                <th>Longitud</th>
                <th>Observaciones</th>
            </tr>
        </thead>
        <tbody>
            {% for a in alcorques %}
            <tr>
                <td><a href="{% url 'alcorque_detalle' a.id %}">{{ a.id }}</a></td>
                <td>{{ a.barrio.nombre }}</td>
                <td>{{ a.get_estado_display }}</td>
                <td>{{ a.direccion|default:"-" }}</td>
                <td>{{ a.latitud|default:"-" }}</td>
                <td>{{ a.longitud|default:"-" }}</td>
                <td>{{ a.observaciones|default:"-" }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="7">No hay alcorques con esos filtros.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>