var Dialog=function(e){"use strict";function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function t(t,e){var i,s=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)),s}function c(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach(function(e){var t,i,s;t=n,s=o[i=e],i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],s=!0,n=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(s=(r=l.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==l.return||l.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}var d={documentSelector:".js-document",documentDisabledClass:"is-disabled",openingTriggerActiveClass:"is-active",delay:200},h=['[href]:not([tabindex^="-"])','input:not([disabled]):not([type="hidden"]):not([tabindex^="-"]):not([type="radio"])','input[type="radio"]:checked','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])','[contenteditable="true"]:not([tabindex^="-"])'],o="Escape",r="Tab",l="F6";function a(e,t){for(var i=e;i!==t&&i;)i=i.parentNode;return i}var F=Symbol("onClick"),j=Symbol("onKeydown"),I=Symbol("addEventDelegation"),g=Symbol("addEventListeners"),b=Symbol("removeEventListeners"),f=Symbol("addAttributes"),v=Symbol("removeAttributes"),p=Symbol("setAttributes"),x=Symbol("setFocusableElements"),y=Symbol("setFocus"),m=Symbol("restoreFocus"),q=Symbol("switchFocus"),S=Symbol("maintainFocus"),A=Symbol("addObserver"),T=Symbol("removeObserver"),P=d;var i=function(){function L(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=i.onOpen,n=void 0===s?function(){}:s,o=i.onClose,r=void 0===o?function(){}:o,l=i.openingSelector,a=i.closingSelector,c=i.backdropSelector,d=i.helperSelector,u=i.labelledby,h=i.describedby,g=i.isModal,b=void 0===g||g,f=i.isTooltip,v=void 0!==f&&f,p=i.isOpen,y=void 0!==p&&p,m=i.isCreated,S=void 0===m||m,A=i.disableScroll,T=void 0===A||A,O=i.enableAutoFocus,k=void 0===O||O,E=i.openingTriggerActiveClass,C=void 0===E?P.openingTriggerActiveClass:E,w=i.delay,D=void 0===w?P.delay:w;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,L),document.querySelector(e)?(this.config={dialogSelector:e,onOpen:n,onClose:r,openingSelector:l,closingSelector:a,backdropSelector:c,helperSelector:d,labelledby:u,describedby:h,isModal:b,isTooltip:v,isCreated:S,isOpen:y,disableScroll:T,enableAutoFocus:k,documentSelector:P.documentSelector,documentDisabledClass:P.documentDisabledClass,openingTriggerActiveClass:C,delay:D},this.dialog=document.querySelector(e),this.dialogArea="".concat(e,", ").concat(l),this.openingTriggers=document.querySelectorAll(l),this.backdropTrigger=document.querySelector(c),this.helpers=document.querySelectorAll(d),this.document=document.querySelector(this.config.documentSelector)||document.querySelector("html"),this.documentIsAlreadyDisabled=!1,this.focusableElements=[],this.firstFocusableElement=null,this.lastFocusableElement=null,this.openingTrigger=null,this.closingTrigger=null,this.isCreated=!1,this.isOpen=!1,this.close=this.close.bind(this),this.toggle=this.toggle.bind(this),this[F]=this[F].bind(this),this[j]=this[j].bind(this),this[I]=this[I].bind(this),this[q]=this[q].bind(this),this.observer=new MutationObserver(function(e){return e.forEach(function(){return t[x]()})}),this.isInitialized=!0,S&&this.create()):this.isInitialized=!1}var e,t,i;return e=L,(t=[{key:F,value:function(e){this.config.isTooltip&&!e.target.closest(this.dialogArea)&&this.close(e),e.target===this.backdropTrigger&&this.close(e)}},{key:j,value:function(e){switch(e.key){case o:e.stopPropagation(),this.close(e);break;case l:this.config.isModal||(this.config.isTooltip?this.close(e):this[m]());break;case r:this[S](e)}}},{key:I,value:function(t){var i=this;document.querySelectorAll(this.config.openingSelector).forEach(function(e){a(t.target,e)&&(i.openingTrigger=e,i.toggle(t))}),document.querySelectorAll(this.config.closingSelector).forEach(function(e){a(t.target,e)&&(i.closingTrigger=e,i.close())})}},{key:g,value:function(){document.addEventListener("click",this[F],{capture:!0}),this.dialog.addEventListener("keydown",this[j])}},{key:b,value:function(){document.removeEventListener("click",this[F],{capture:!0}),this.dialog.removeEventListener("keydown",this[j]),this.openingTrigger&&this.openingTrigger.removeEventListener("keydown",this[q])}},{key:f,value:function(){this.dialog.setAttribute("role","dialog"),this.dialog.setAttribute("tabindex",-1),this.dialog.setAttribute("aria-hidden",!0),this.config.labelledby&&this.dialog.setAttribute("aria-labelledby",this.config.labelledby),this.config.describedby&&this.dialog.setAttribute("aria-describedby",this.config.describedby),this.config.isModal&&this.dialog.setAttribute("aria-modal",!0),this.openingTriggers.forEach(function(e){return e.setAttribute("aria-haspopup","dialog")})}},{key:v,value:function(){var t=this;this.dialog.removeAttribute("role"),this.dialog.removeAttribute("tabindex"),this.dialog.removeAttribute("aria-hidden"),this.dialog.removeAttribute("aria-labelledby"),this.dialog.removeAttribute("aria-describedby"),this.dialog.removeAttribute("aria-modal"),this.config.disableScroll&&this.isOpen&&!this.documentIsAlreadyDisabled&&this.document.classList.remove(this.config.documentDisabledClass),this.openingTriggers.forEach(function(e){return e.removeAttribute("aria-haspopup")}),this.openingTrigger&&this.openingTrigger.classList.remove(this.config.openingTriggerActiveClass),this.helpers.forEach(function(e){return e.classList.remove(t.config.openingTriggerActiveClass)})}},{key:p,value:function(){var t=this;this.dialog.setAttribute("aria-hidden",!this.isOpen),this.config.disableScroll&&!this.documentIsAlreadyDisabled&&(this.isOpen?this.document.classList.add(this.config.documentDisabledClass):this.document.classList.remove(this.config.documentDisabledClass)),this.openingTrigger&&(this.isOpen?this.openingTrigger.classList.add(this.config.openingTriggerActiveClass):this.openingTrigger.classList.remove(this.config.openingTriggerActiveClass)),this.helpers.forEach(function(e){t.isOpen?e.classList.add(t.config.openingTriggerActiveClass):e.classList.remove(t.config.openingTriggerActiveClass)})}},{key:x,value:function(){var e,i,t,s,n,o,r,l,a=(e=this.dialog.querySelectorAll(h),i=[],e.forEach(function(e){var t=e.getBoundingClientRect();(0<t.width||0<t.height)&&i.push(e)}),i),c=(t=this.dialog,s='[role="dialog"]',n=a,o=t.querySelectorAll(s),l=!(r=[]),0===o.length?n:(n.forEach(function(t){o.forEach(function(e){e.contains(t)&&(l=!0)}),l||r.push(t),l=!1}),r));this.focusableElements=0<c.length?c:[this.dialog];var d=u(this.focusableElements,1);this.firstFocusableElement=d[0],this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1]}},{key:y,value:function(){var e=this;this.config.enableAutoFocus&&window.setTimeout(function(){return e.firstFocusableElement.focus()},this.config.delay)}},{key:m,value:function(){var e=this;this.config.enableAutoFocus&&window.setTimeout(function(){return e.openingTrigger.focus()},this.config.delay),this.isOpen&&this.openingTrigger.addEventListener("keydown",this[q])}},{key:q,value:function(e){e.key===l&&(this.openingTrigger.removeEventListener("keydown",this[q]),this[y]())}},{key:S,value:function(e){e.shiftKey&&e.target===this.firstFocusableElement&&(e.preventDefault(),this.lastFocusableElement.focus()),e.shiftKey||e.target!==this.lastFocusableElement||(e.preventDefault(),this.firstFocusableElement.focus())}},{key:A,value:function(){this.observer.observe(this.dialog,{childList:!0,attributes:!0,subtree:!0})}},{key:T,value:function(){this.observer.disconnect()}},{key:"open",value:function(){this.isInitialized&&this.isCreated&&!this.isOpen&&(this.isOpen=!0,this.documentIsAlreadyDisabled=this.document.classList.contains(this.config.documentDisabledClass),this[p](),this[g](),this[y](),this.config.onOpen(this.dialog,this.openingTrigger))}},{key:"close",value:function(e){this.isInitialized&&this.isCreated&&this.isOpen&&(this.isOpen=!1,e&&e.preventDefault(),this[p](),this[b](),this.openingTrigger&&(!this.config.isTooltip||this.config.isTooltip&&e&&"click"!==e.type)&&this[m](),this.config.onClose(this.dialog,this.closingTrigger))}},{key:"toggle",value:function(e){this.isInitialized&&this.isCreated&&(e&&e.preventDefault(),this.isOpen?this.close():this.open())}},{key:"create",value:function(){this.isInitialized&&!this.isCreated&&(this.isCreated=!0,this[f](),this[x](),this[A](),this.config.isOpen&&this.open(),document.addEventListener("click",this[I],{capture:!0}))}},{key:"destroy",value:function(){this.isInitialized&&this.isCreated&&(this.close(),this.isCreated=!1,this[v](),this[b](),this[T](),document.removeEventListener("click",this[I],{capture:!0}))}}])&&s(e.prototype,t),i&&s(e,i),L}();return e.default=i,e.setDefaults=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.documentSelector,i=void 0===t?P.documentSelector:t,s=e.documentDisabledClass,n=void 0===s?P.documentDisabledClass:s,o=e.openingTriggerActiveClass,r=void 0===o?P.openingTriggerActiveClass:o,l=e.delay,a=void 0===l?P.delay:l;P=c(c({},d),{documentSelector:i,documentDisabledClass:n,openingTriggerActiveClass:r,delay:a})},e}({});
//# sourceMappingURL=a11y-dialog-component.min.js.map
